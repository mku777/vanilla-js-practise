{"version":3,"sources":["node_modules/simplelightbox/dist/simple-lightbox.esm.js","gallery.js"],"names":["SimpleLightbox","defaultOptions","sourceAttr","overlay","overlayOpacity","spinner","nav","navText","captions","captionDelay","captionSelector","captionType","captionsData","captionPosition","captionClass","close","closeText","swipeClose","showCounter","fileExt","animationSlide","animationSpeed","preloading","enableKeyboard","loop","rel","docClose","swipeTolerance","className","widthRatio","heightRatio","scaleImageToRatio","disableRightClick","disableScroll","alertError","alertErrorMessage","additionalHtml","history","throttleInterval","doubleTapZoom","maxZoom","htmlClass","rtl","fixedClass","fadeSpeed","uniqueImages","focus","scrollZoom","scrollZoomFactor","download","transitionPrefix","isPassiveEventsSupported","transitionCapable","isTouchDevice","window","isAppleDevice","test","navigator","platform","initialLocationHash","pushStateSupport","isOpen","isAnimating","isClosing","isFadeIn","urlChangedOnce","hashReseted","historyHasChanges","historyUpdateTimeout","currentImage","eventNamespace","domNodes","loadedImages","initialImageIndex","currentImageIndex","initialSelector","globalScrollbarWidth","controlCoordinates","swipeDiff","swipeYDiff","swipeStart","swipeEnd","swipeYStart","swipeYEnd","mousedown","imageLeft","zoomed","containerHeight","containerWidth","containerOffsetX","containerOffsetY","imgHeight","imgWidth","capture","initialOffsetX","initialOffsetY","initialPointerOffsetX","initialPointerOffsetY","initialPointerOffsetX2","initialPointerOffsetY2","initialScale","initialPinchDistance","pointerOffsetX","pointerOffsetY","pointerOffsetX2","pointerOffsetY2","targetOffsetX","targetOffsetY","targetScale","pinchOffsetX","pinchOffsetY","limitOffsetX","limitOffsetY","scaleDifference","targetPinchDistance","touchCount","doubleTapped","touchmoveCount","constructor","elements","options","Object","assign","checkPassiveEventsSupport","Array","from","document","querySelectorAll","length","relatedElements","calculateTransitionPrefix","hash","getRelated","imgArr","filter","element","src","getAttribute","indexOf","push","createDomNodes","wrapper","appendChild","closeButton","navigation","addEventListener","event","isValidLink","currentTarget","preventDefault","openImage","target","body","parentElement","classList","contains","throttle","key","setAttribute","loadImage","addEvents","supportsPassive","opts","defineProperty","get","removeEventListener","e","getCaptionElement","elem","startsWith","selector","replace","trimStart","sibling","nextElementSibling","matches","querySelector","generateQuerySelector","tagName","id","parentNode","str","classes","trim","split","i","childIndex","previousElementSibling","createElement","add","dataset","opacityTarget","innerHTML","counter","downloadLink","textContent","caption","captionClasses","image","func","limit","inThrottle","apply","arguments","setTimeout","RegExp","s","documentElement","style","getScrollbarWidth","scrollbarWidth","scrollDiv","offsetWidth","clientWidth","removeChild","toggleScrollbar","type","fixedElements","slice","call","fullWindowWidth","innerWidth","documentElementRect","getBoundingClientRect","right","Math","abs","left","paddingRight","parseInt","getComputedStyle","originalPaddingRight","forEach","actualPadding","calculatedPadding","parseFloat","remove","padding","dispatchEvent","Event","resetHash","fadeOut","minMax","location","substring","preload","index","next","prev","nextImage","Image","prevImage","direction","slideDirection","newIndex","slide","show","adjustImage","tmpImage","windowWidth","windowHeight","innerHeight","scale","translateX","translateY","zoomPanElement","display","dirIsDefined","alert","updateURL","imageWidth","width","imageHeight","height","ratio","top","forceFocus","fadeIn","captionContainer","captionText","hide","setCaption","value","min","max","setZoomData","hashchangeHandler","bind","getElementsByTagName","match","getDimensions","offsetLeft","offsetTop","delta","wheelDelta","undefined","detail","scrollTopPos","scrollTop","pageX","pageY","opacity","clientX","clientY","touches","sqrt","possibleDir","styles","offsetHeight","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","paddingLeft","updateHash","newHash","newURL","href","title","back","pushState","pathname","search","clearTimeout","speed","pos","elems","targetURL","events","callback","wrap","namespaces","needsPassiveFix","passive","duration","getPropertyValue","step","fade","currentOpacity","requestAnimationFrame","initialDisplay","input","Symbol","iterator","on","fullyNamespacedEvents","off","open","position","jQuery","openPosition","getLighboxData","destroy","refresh","_default","exports","default","global","_simpleLightbox","_interopRequireDefault","require","obj","__esModule","galleryItems","preview","original","description","galleryEl","myMarkUp","createGalleryMarkup","gallery","map","item","concat","join","lightbox","console","log"],"mappings":"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","file":"gallery.9a8aea70.js","sourceRoot":"..","sourcesContent":["/*!\r\n\tBy André Rinas, www.andrerinas.de\r\n\tDocumentation, www.simplelightbox.com\r\n\tAvailable for use under the MIT License\r\n\tVersion 2.14.1\r\n*/\nclass SimpleLightbox {\n\n    defaultOptions = {\n        sourceAttr: 'href',\n        overlay: true,\n        overlayOpacity: 0.7,\n        spinner: true,\n        nav: true,\n        navText: ['&lsaquo;', '&rsaquo;'],\n        captions: true,\n        captionDelay: 0,\n        captionSelector: 'img',\n        captionType: 'attr',\n        captionsData: 'title',\n        captionPosition: 'bottom',\n        captionClass: '',\n        close: true,\n        closeText: '&times;',\n        swipeClose: true,\n        showCounter: true,\n        fileExt: 'png|jpg|jpeg|gif|webp',\n        animationSlide: true,\n        animationSpeed: 250,\n        preloading: true,\n        enableKeyboard: true,\n        loop: true,\n        rel: false,\n        docClose: true,\n        swipeTolerance: 50,\n        className: 'simple-lightbox',\n        widthRatio: 0.8,\n        heightRatio: 0.9,\n        scaleImageToRatio: false,\n        disableRightClick: false,\n        disableScroll: true,\n        alertError: true,\n        alertErrorMessage: 'Image not found, next image will be loaded',\n        additionalHtml: false,\n        history: true,\n        throttleInterval: 0,\n        doubleTapZoom: 2,\n        maxZoom: 10,\n        htmlClass: 'has-lightbox',\n        rtl: false,\n        fixedClass: 'sl-fixed',\n        fadeSpeed: 300,\n        uniqueImages: true,\n        focus: true,\n        scrollZoom: true,\n        scrollZoomFactor: 0.5,\n        download: false\n    };\n\n    transitionPrefix;\n    isPassiveEventsSupported;\n    transitionCapable = false;\n\n    isTouchDevice = ('ontouchstart' in window);\n    isAppleDevice = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\n    initialLocationHash;\n\n    pushStateSupport = ('pushState' in history);\n\n    isOpen = false;\n    isAnimating = false;\n    isClosing = false;\n    isFadeIn = false;\n    urlChangedOnce = false;\n    hashReseted = false;\n    historyHasChanges = false;\n    historyUpdateTimeout = null;\n\n    currentImage;\n    eventNamespace = 'simplelightbox';\n    domNodes = {};\n\n    loadedImages = [];\n    initialImageIndex = 0;\n    currentImageIndex = 0;\n\n    initialSelector = null;\n    globalScrollbarWidth = 0;\n\n    controlCoordinates = {\n        swipeDiff: 0,\n        swipeYDiff: 0,\n        swipeStart: 0,\n        swipeEnd: 0,\n        swipeYStart: 0,\n        swipeYEnd: 0,\n        mousedown: false,\n        imageLeft: 0,\n        zoomed: false,\n        containerHeight: 0,\n        containerWidth: 0,\n        containerOffsetX: 0,\n        containerOffsetY: 0,\n        imgHeight: 0,\n        imgWidth: 0,\n        capture: false,\n        initialOffsetX: 0,\n        initialOffsetY: 0,\n        initialPointerOffsetX: 0,\n        initialPointerOffsetY: 0,\n        initialPointerOffsetX2: 0,\n        initialPointerOffsetY2: 0,\n        initialScale: 1,\n        initialPinchDistance: 0,\n        pointerOffsetX: 0,\n        pointerOffsetY: 0,\n        pointerOffsetX2: 0,\n        pointerOffsetY2: 0,\n        targetOffsetX: 0,\n        targetOffsetY: 0,\n        targetScale: 0,\n        pinchOffsetX: 0,\n        pinchOffsetY: 0,\n        limitOffsetX: 0,\n        limitOffsetY: 0,\n        scaleDifference: 0,\n        targetPinchDistance: 0,\n        touchCount: 0,\n        doubleTapped: false,\n        touchmoveCount: 0\n    };\n\n    constructor(elements, options) {\n\n        this.options = Object.assign(this.defaultOptions, options);\n        this.isPassiveEventsSupported = this.checkPassiveEventsSupport();\n\n        if (typeof elements === 'string') {\n            this.initialSelector = elements;\n            this.elements = Array.from(document.querySelectorAll(elements));\n        } else {\n            this.elements = ((typeof elements.length !== 'undefined') && elements.length > 0) ? Array.from(elements) : [elements];\n        }\n\n        this.relatedElements = [];\n\n        this.transitionPrefix = this.calculateTransitionPrefix();\n        this.transitionCapable = this.transitionPrefix !== false;\n        this.initialLocationHash = this.hash;\n\n        // this should be handled by attribute selector IMHO! => 'a[rel=bla]'...\n        if (this.options.rel) {\n            this.elements = this.getRelated(this.options.rel);\n        }\n\n        if (this.options.uniqueImages) {\n            let imgArr = [];\n            this.elements = Array.from(this.elements).filter(\n                element => {\n                    let src = element.getAttribute(this.options.sourceAttr);\n                    if(imgArr.indexOf(src) === -1) {\n                        imgArr.push(src);\n                        return true;\n                    }\n                    return false;\n                }\n            );\n        }\n\n        this.createDomNodes();\n\n        if (this.options.close) {\n            this.domNodes.wrapper.appendChild(this.domNodes.closeButton);\n        }\n\n        if (this.options.nav) {\n            this.domNodes.wrapper.appendChild(this.domNodes.navigation);\n        }\n\n        if (this.options.spinner) {\n            this.domNodes.wrapper.appendChild(this.domNodes.spinner);\n        }\n\n        this.addEventListener(this.elements, 'click.' + this.eventNamespace, (event) => {\n\n            if (this.isValidLink(event.currentTarget)) {\n                event.preventDefault();\n                if (this.isAnimating) {\n                    return false;\n                }\n\n                this.initialImageIndex = this.elements.indexOf(event.currentTarget);\n                this.openImage(event.currentTarget);\n            }\n        });\n\n        // close addEventListener click addEventListener doc\n        if (this.options.docClose) {\n            this.addEventListener(this.domNodes.wrapper, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], (event) => {\n                if (this.isOpen && event.target === event.currentTarget) {\n                    this.close();\n                }\n            });\n        }\n\n        // disable rightclick\n        if (this.options.disableRightClick) {\n            this.addEventListener(document.body, 'contextmenu.' + this.eventNamespace, (event) => {\n                if (event.target.parentElement.classList.contains(\"sl-image\")) {\n                    event.preventDefault();\n                }\n            });\n        }\n\n        // keyboard-control\n        if (this.options.enableKeyboard) {\n            this.addEventListener(document.body, 'keyup.' + this.eventNamespace, this.throttle((event) => {\n                this.controlCoordinates.swipeDiff = 0;\n                // keyboard control only if lightbox is open\n\n                if (this.isAnimating && event.key === 'Escape') {\n                    this.currentImage.setAttribute('src', '');\n                    this.isAnimating = false;\n                    this.close();\n                    return;\n                }\n\n                if (this.isOpen) {\n                    event.preventDefault();\n                    if (event.key === 'Escape') {\n                        this.close();\n                    }\n                    if(!this.isAnimating && ['ArrowLeft', 'ArrowRight'].indexOf(event.key) > -1) {\n                      this.loadImage(event.key === 'ArrowRight' ? 1 : -1);\n                    }\n                }\n            }, this.options.throttleInterval));\n        }\n\n        this.addEvents();\n    }\n\n    checkPassiveEventsSupport() {\n        // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n        // Test via a getter in the options object to see if the passive property is accessed\n        let supportsPassive = false;\n        try {\n            let opts = Object.defineProperty({}, 'passive', {\n                get: function() {\n                    supportsPassive = true;\n                }\n            });\n            window.addEventListener(\"testPassive\", null, opts);\n            window.removeEventListener(\"testPassive\", null, opts);\n        } catch (e) {}\n        return supportsPassive;\n    }\n\n    getCaptionElement(elem) {\n        // look at sibling selector\n        if( this.options.captionSelector.startsWith('+')) {\n            let selector = this.options.captionSelector.replace(/^\\+/, '').trimStart();\n            let sibling = elem.nextElementSibling;\n            if(sibling.matches(selector)) {\n                return sibling;\n            }\n            return false;\n        }\n        else if( this.options.captionSelector.startsWith('>') ) {\n            let selector = this.options.captionSelector.replace(/^>/, '').trimStart();\n            return elem.querySelector(selector);\n        }\n        else {\n            return elem.querySelector(this.options.captionSelector);\n        }\n    }\n\n    generateQuerySelector(elem) {\n        const {\n            tagName,\n            id,\n            className,\n            parentNode\n        } = elem;\n\n        if (tagName === 'HTML') return 'HTML';\n\n        let str = tagName;\n\n        str += (id !== '') ? `#${id}` : '';\n\n        if (className) {\n            const classes = className.trim().split(/\\s/);\n            for (let i = 0; i < classes.length; i++) {\n                str += `.${classes[i]}`;\n            }\n        }\n\n        let childIndex = 1;\n\n        for (let e = elem; e.previousElementSibling; e = e.previousElementSibling) {\n            childIndex += 1;\n        }\n\n        str += `:nth-child(${childIndex})`;\n\n        return `${this.generateQuerySelector(parentNode)} > ${str}`;\n    }\n\n    createDomNodes() {\n        this.domNodes.overlay = document.createElement('div');\n        this.domNodes.overlay.classList.add('sl-overlay');\n        this.domNodes.overlay.dataset.opacityTarget = this.options.overlayOpacity;\n\n        this.domNodes.closeButton = document.createElement('button');\n        this.domNodes.closeButton.classList.add('sl-close');\n        this.domNodes.closeButton.innerHTML = this.options.closeText;\n\n        this.domNodes.spinner = document.createElement('div');\n        this.domNodes.spinner.classList.add('sl-spinner');\n        this.domNodes.spinner.innerHTML = '<div></div>';\n\n        this.domNodes.navigation = document.createElement('div');\n        this.domNodes.navigation.classList.add('sl-navigation');\n        this.domNodes.navigation.innerHTML = `<button class=\"sl-prev\">${this.options.navText[0]}</button><button class=\"sl-next\">${this.options.navText[1]}</button>`;\n\n        this.domNodes.counter = document.createElement('div');\n        this.domNodes.counter.classList.add('sl-counter');\n        this.domNodes.counter.innerHTML = '<span class=\"sl-current\"></span>/<span class=\"sl-total\"></span>';\n\n        this.domNodes.download = document.createElement('div');\n        this.domNodes.download.classList.add('sl-download');\n\n        this.domNodes.downloadLink = document.createElement('a');\n        this.domNodes.downloadLink.setAttribute('download', '');\n        this.domNodes.downloadLink.textContent = this.options.download;\n\n        this.domNodes.download.appendChild(this.domNodes.downloadLink);\n\n        this.domNodes.caption = document.createElement('div');\n        this.domNodes.caption.classList.add('sl-caption', 'pos-' + this.options.captionPosition);\n        if (this.options.captionClass) {\n            let captionClasses = this.options.captionClass.split(/[\\s,]+/);\n            this.domNodes.caption.classList.add(...captionClasses);\n        }\n\n        this.domNodes.image = document.createElement('div');\n        this.domNodes.image.classList.add('sl-image');\n\n        this.domNodes.wrapper = document.createElement('div');\n        this.domNodes.wrapper.classList.add('sl-wrapper');\n        this.domNodes.wrapper.setAttribute('tabindex',-1);\n        this.domNodes.wrapper.setAttribute('role','dialog');\n        this.domNodes.wrapper.setAttribute('aria-hidden',false);\n        if (this.options.className) {\n            this.domNodes.wrapper.classList.add(this.options.className);\n        }\n        if(this.options.rtl) {\n            this.domNodes.wrapper.classList.add('sl-dir-rtl');\n        }\n    }\n\n    throttle(func, limit) {\n        let inThrottle;\n        return function () {\n            if (!inThrottle) {\n                func.apply(this, arguments);\n                inThrottle = true;\n                setTimeout(function () {\n                    return inThrottle = false;\n                }, limit);\n            }\n        };\n    }\n\n    isValidLink(element) {\n        return (!this.options.fileExt) || (element.getAttribute(this.options.sourceAttr) && new RegExp('(' + this.options.fileExt + ')($|\\\\?.*$)', 'i').test(element.getAttribute(this.options.sourceAttr)));\n    }\n\n    calculateTransitionPrefix() {\n        let s = (document.body || document.documentElement).style;\n\n        return 'transition' in s ? '' :\n            'WebkitTransition' in s ? '-webkit-' :\n                'MozTransition' in s ? '-moz-' :\n                    'OTransition' in s ? '-o' :\n                        false;\n    }\n\n    getScrollbarWidth() {\n        let scrollbarWidth = 0;\n        let scrollDiv = document.createElement('div');\n        scrollDiv.classList.add('sl-scrollbar-measure');\n\n        document.body.appendChild(scrollDiv);\n        scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        document.body.removeChild(scrollDiv);\n        return scrollbarWidth;\n    }\n\n    toggleScrollbar(type) {\n        let scrollbarWidth = 0;\n        let fixedElements =  [].slice.call(document.querySelectorAll('.'+this.options.fixedClass))\n        if (type === 'hide') {\n            let fullWindowWidth = window.innerWidth;\n            if (!fullWindowWidth) {\n                let documentElementRect = document.documentElement.getBoundingClientRect();\n                fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n            }\n            if (document.body.clientWidth < fullWindowWidth || this.isAppleDevice) {\n                let paddingRight = parseInt(window.getComputedStyle(document.body).paddingRight || 0, 10);\n                scrollbarWidth = this.getScrollbarWidth();\n                document.body.dataset.originalPaddingRight = paddingRight;\n                if (scrollbarWidth > 0 || (scrollbarWidth == 0 && this.isAppleDevice)) {\n                    document.body.classList.add('hidden-scroll');\n                    document.body.style.paddingRight = (paddingRight + scrollbarWidth) + 'px';\n\n                    fixedElements.forEach(element => {\n                        const actualPadding = element.style.paddingRight\n                        const calculatedPadding = window.getComputedStyle(element)['padding-right']\n                        element.dataset.originalPaddingRight = actualPadding;\n                        element.style.paddingRight = `${parseFloat(calculatedPadding) + scrollbarWidth}px`\n                    });\n\n                }\n            }\n        } else {\n            document.body.classList.remove('hidden-scroll');\n            document.body.style.paddingRight = document.body.dataset.originalPaddingRight + 'px';\n\n            fixedElements.forEach(element => {\n                const padding = element.dataset.originalPaddingRight;\n                if (typeof padding !== 'undefined') {\n                    element.style.paddingRight = padding\n                }\n            });\n        }\n        return scrollbarWidth;\n    }\n\n    close() {\n        if (!this.isOpen || this.isAnimating || this.isClosing) {\n            return false;\n        }\n\n        this.isClosing = true;\n        let element = this.relatedElements[this.currentImageIndex];\n        element.dispatchEvent(new Event('close.simplelightbox'));\n\n        if (this.options.history) {\n            this.historyHasChanges = false;\n            if(!this.hashReseted) {\n                this.resetHash();\n            }\n        }\n\n        this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n\n        this.fadeOut(this.domNodes.overlay, this.options.fadeSpeed);\n        this.fadeOut(document.querySelectorAll('.sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter'), this.options.fadeSpeed, () => {\n            if (this.options.disableScroll) {\n                this.toggleScrollbar('show');\n            }\n\n            if (this.options.htmlClass && this.options.htmlClass !== '') {\n                document.querySelector('html').classList.remove(this.options.htmlClass);\n            }\n\n            document.body.removeChild(this.domNodes.wrapper);\n            if(this.options.overlay) {\n                document.body.removeChild(this.domNodes.overlay);\n            }\n            this.domNodes.additionalHtml = null;\n            this.domNodes.download = null;\n\n            element.dispatchEvent(new Event('closed.simplelightbox'));\n\n            this.isClosing = false;\n        });\n\n        this.currentImage = null;\n        this.isOpen = false;\n        this.isAnimating = false;\n\n        // reset touchcontrol coordinates\n        for (let key in this.controlCoordinates) {\n            this.controlCoordinates[key] = 0;\n        }\n        this.controlCoordinates.mousedown = false;\n        this.controlCoordinates.zoomed = false;\n        this.controlCoordinates.capture = false;\n        this.controlCoordinates.initialScale = this.minMax(1, 1, this.options.maxZoom);\n        this.controlCoordinates.doubleTapped = false;\n    }\n\n    get hash() {\n        return window.location.hash.substring(1);\n    }\n\n    preload() {\n        let index = this.currentImageIndex,\n            length = this.relatedElements.length,\n            next = (index + 1 < 0) ? length - 1 : (index + 1 >= length - 1) ? 0 : index + 1,\n            prev = (index - 1 < 0) ? length - 1 : (index - 1 >= length - 1) ? 0 : index - 1,\n            nextImage = new Image(),\n            prevImage = new Image();\n\n        nextImage.addEventListener('load', (event) => {\n            let src = event.target.getAttribute('src');\n            if (this.loadedImages.indexOf(src) === -1) { //is this condition even required... setting multiple times will not change usage...\n                this.loadedImages.push(src);\n            }\n            this.relatedElements[index].dispatchEvent(new Event('nextImageLoaded.' + this.eventNamespace));\n        });\n        nextImage.setAttribute('src', this.relatedElements[next].getAttribute(this.options.sourceAttr));\n\n        prevImage.addEventListener('load', (event) => {\n            let src = event.target.getAttribute('src');\n            if (this.loadedImages.indexOf(src) === -1) {\n                this.loadedImages.push(src);\n            }\n            this.relatedElements[index].dispatchEvent(new Event('prevImageLoaded.' + this.eventNamespace));\n        });\n        prevImage.setAttribute('src', this.relatedElements[prev].getAttribute(this.options.sourceAttr));\n    }\n\n    loadImage(direction) {\n        let slideDirection = direction;\n        if(this.options.rtl) {\n            direction = -direction;\n        }\n\n        this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('change.' + this.eventNamespace));\n        this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'next' : 'prev') + '.' + this.eventNamespace));\n\n        let newIndex = this.currentImageIndex + direction;\n\n        if (this.isAnimating || (newIndex < 0 || newIndex >= this.relatedElements.length) && this.options.loop === false) {\n            return false;\n        }\n\n        this.currentImageIndex = (newIndex < 0) ? this.relatedElements.length - 1 : (newIndex > this.relatedElements.length - 1) ? 0 : newIndex;\n\n        this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\n\n\n        if (this.options.animationSlide) {\n            this.slide(this.options.animationSpeed / 1000, (-100 * slideDirection) - this.controlCoordinates.swipeDiff + 'px');\n        }\n        this.fadeOut(this.domNodes.image, this.options.fadeSpeed, () => {\n            this.isAnimating = true;\n            if(!this.isClosing) {\n                setTimeout(() => {\n                    let element = this.relatedElements[this.currentImageIndex];\n                    if(!this.currentImage) return;\n                    this.currentImage.setAttribute('src', element.getAttribute(this.options.sourceAttr));\n\n                    if (this.loadedImages.indexOf(element.getAttribute(this.options.sourceAttr)) === -1) {\n                        this.show(this.domNodes.spinner);\n                    }\n\n                    if(this.domNodes.image.contains(this.domNodes.caption)) {\n                      this.domNodes.image.removeChild(this.domNodes.caption);\n                    }\n\n                    this.adjustImage(slideDirection);\n                    if (this.options.preloading) this.preload();\n                }, 100);\n            } else {\n                this.isAnimating = false;\n            }\n        });\n    }\n\n    adjustImage(direction) {\n        if (!this.currentImage) {\n            return false;\n        }\n\n        let tmpImage = new Image(),\n            windowWidth = window.innerWidth * this.options.widthRatio,\n            windowHeight = window.innerHeight * this.options.heightRatio;\n\n        tmpImage.setAttribute('src', this.currentImage.getAttribute('src'));\n\n        this.currentImage.dataset.scale = 1;\n        this.currentImage.dataset.translateX = 0;\n        this.currentImage.dataset.translateY = 0;\n        this.zoomPanElement(0, 0, 1);\n\n        tmpImage.addEventListener('error', (event) => {\n            this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('error.' + this.eventNamespace));\n            this.isAnimating = false;\n            this.isOpen = true;\n            this.domNodes.spinner.style.display = 'none';\n\n            let dirIsDefined = direction === 1 || direction === -1;\n            if (this.initialImageIndex === this.currentImageIndex && dirIsDefined) {\n                return this.close();\n            }\n\n            if (this.options.alertError) {\n                alert(this.options.alertErrorMessage);\n            }\n\n            this.loadImage(dirIsDefined ? direction : 1);\n        });\n\n\n        tmpImage.addEventListener('load', (event) => {\n            if (typeof direction !== 'undefined') {\n                this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('changed.' + this.eventNamespace));\n                this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'nextDone' : 'prevDone') + '.' + this.eventNamespace));\n            }\n\n            // history\n            if (this.options.history) {\n                this.updateURL();\n            }\n\n            if (this.loadedImages.indexOf(this.currentImage.getAttribute('src')) === -1) {\n                this.loadedImages.push(this.currentImage.getAttribute('src'));\n            }\n\n            let imageWidth = event.target.width,\n                imageHeight = event.target.height;\n\n            if (this.options.scaleImageToRatio || imageWidth > windowWidth || imageHeight > windowHeight) {\n                let ratio = imageWidth / imageHeight > windowWidth / windowHeight ? imageWidth / windowWidth : imageHeight / windowHeight;\n                imageWidth /= ratio;\n                imageHeight /= ratio;\n            }\n\n            this.domNodes.image.style.top = (window.innerHeight - imageHeight) / 2 + 'px';\n            this.domNodes.image.style.left = (window.innerWidth - imageWidth - this.globalScrollbarWidth) / 2 + 'px';\n            this.domNodes.image.style.width = imageWidth + 'px';\n            this.domNodes.image.style.height = imageHeight + 'px';\n\n            this.domNodes.spinner.style.display = 'none';\n            if( this.options.focus ) {\n                this.forceFocus();\n            }\n            this.fadeIn(this.currentImage, this.options.fadeSpeed, () => {\n                if( this.options.focus ) {\n                    this.domNodes.wrapper.focus();\n                }\n            });\n\n            this.isOpen = true;\n\n            let captionContainer,\n                captionText;\n\n            if (typeof this.options.captionSelector === 'string') {\n                captionContainer = this.options.captionSelector === 'self'\n                    ? this.relatedElements[this.currentImageIndex]\n                    : this.getCaptionElement(this.relatedElements[this.currentImageIndex]);\n            } else if (typeof this.options.captionSelector === 'function') {\n                captionContainer = this.options.captionSelector(this.relatedElements[this.currentImageIndex]);\n            }\n\n            if(this.options.captions && captionContainer) {\n                if (this.options.captionType === 'data') {\n                    captionText = captionContainer.dataset[this.options.captionsData];\n                } else if (this.options.captionType === 'text') {\n                    captionText = captionContainer.innerHTML;\n                } else {\n                    captionText = captionContainer.getAttribute(this.options.captionsData);\n                }\n            }\n\n            if (!this.options.loop) {\n                if (this.currentImageIndex === 0) {\n                    this.hide(this.domNodes.navigation.querySelector('.sl-prev'));\n                }\n                if (this.currentImageIndex >= this.relatedElements.length - 1) {\n                    this.hide(this.domNodes.navigation.querySelector('.sl-next'));\n                }\n                if (this.currentImageIndex > 0) {\n                    this.show(this.domNodes.navigation.querySelector('.sl-prev'));\n                }\n                if (this.currentImageIndex < this.relatedElements.length - 1) {\n                    this.show(this.domNodes.navigation.querySelector('.sl-next'));\n                }\n            } else {\n                if (this.relatedElements.length === 1) {\n                    this.hide(this.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\n                } else {\n                    this.show(this.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\n                }\n            }\n\n\n            if (direction === 1 || direction === -1) {\n                if (this.options.animationSlide) {\n                    this.slide(0, 100 * direction + 'px');\n                    setTimeout(() => {\n                        this.slide(this.options.animationSpeed / 1000, 0 + 'px');\n                    }, 50);\n                }\n                this.fadeIn(this.domNodes.image, this.options.fadeSpeed, () => {\n                    this.isAnimating = false;\n                    this.setCaption(captionText, imageWidth);\n                });\n\n            } else {\n                this.isAnimating = false;\n                this.setCaption(captionText, imageWidth);\n            }\n\n            if (this.options.additionalHtml && !this.domNodes.additionalHtml) {\n                this.domNodes.additionalHtml = document.createElement('div');\n                this.domNodes.additionalHtml.classList.add('sl-additional-html');\n                this.domNodes.additionalHtml.innerHTML = this.options.additionalHtml;\n                this.domNodes.image.appendChild(this.domNodes.additionalHtml);\n            }\n\n            if (this.options.download) {\n                this.domNodes.downloadLink.setAttribute('href', this.currentImage.getAttribute('src'));\n            }\n\n        });\n    }\n\n    zoomPanElement(targetOffsetX, targetOffsetY, targetScale) {\n\n        this.currentImage.style[this.transitionPrefix + 'transform'] = 'translate(' + targetOffsetX + ',' + targetOffsetY + ') scale(' + targetScale + ')';\n\n    };\n\n    minMax(value, min, max) {\n        return (value < min) ? min : (value > max) ? max : value;\n    };\n\n    setZoomData(initialScale, targetOffsetX, targetOffsetY) {\n        this.currentImage.dataset.scale = initialScale;\n        this.currentImage.dataset.translateX = targetOffsetX;\n        this.currentImage.dataset.translateY = targetOffsetY;\n    };\n\n\n    hashchangeHandler() {\n        if (this.isOpen && this.hash === this.initialLocationHash) {\n            this.hashReseted = true;\n            this.close();\n        }\n    }\n\n    addEvents() {\n\n        // resize/responsive\n        this.addEventListener(window, 'resize.' + this.eventNamespace, (event) => {\n            //this.adjustImage.bind(this)\n            if (this.isOpen) {\n                this.adjustImage();\n            }\n        });\n\n        this.addEventListener(this.domNodes.closeButton, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], this.close.bind(this));\n\n        if (this.options.history) {\n            setTimeout(() => {\n                this.addEventListener(window, 'hashchange.' + this.eventNamespace, (event) => {\n                    if (this.isOpen) {\n                        this.hashchangeHandler();\n                    }\n                });\n            }, 40);\n        }\n\n        this.addEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace, (event) => {\n            if (!event.currentTarget.tagName.match(/button/i)) {\n                return true;\n            }\n\n            event.preventDefault();\n            this.controlCoordinates.swipeDiff = 0;\n            this.loadImage(event.currentTarget.classList.contains('sl-next') ? 1 : -1);\n        });\n\n        if (this.options.scrollZoom) {\n            let scale = 1\n\n            this.addEventListener(this.domNodes.image, ['mousewheel','DOMMouseScroll'], (event) => {\n                if (this.controlCoordinates.mousedown || this.isAnimating || this.isClosing || !this.isOpen) {\n                    return true;\n                }\n                if(this.controlCoordinates.containerHeight == 0) {\n                    this.controlCoordinates.containerHeight = this.getDimensions(this.domNodes.image).height;\n                    this.controlCoordinates.containerWidth = this.getDimensions(this.domNodes.image).width;\n                    this.controlCoordinates.imgHeight = this.getDimensions(this.currentImage).height;\n                    this.controlCoordinates.imgWidth = this.getDimensions(this.currentImage).width;\n                    this.controlCoordinates.containerOffsetX = this.domNodes.image.offsetLeft;\n                    this.controlCoordinates.containerOffsetY = this.domNodes.image.offsetTop;\n\n                    this.controlCoordinates.initialOffsetX = parseFloat(this.currentImage.dataset.translateX);\n                    this.controlCoordinates.initialOffsetY = parseFloat(this.currentImage.dataset.translateY);\n                }\n                // event.preventDefault();\n\n                let delta = event.delta || event.wheelDelta;\n                if (delta === undefined) {\n                    //we are on firefox\n                    delta = event.detail;\n                }\n                delta = Math.max(-1,Math.min(1,delta)); // cap the delta to [-1,1] for cross browser consistency\n\n                // apply zoom\n                scale += delta * this.options.scrollZoomFactor * scale;\n                scale = Math.max(1, Math.min( this.options.maxZoom, scale));\n\n                this.controlCoordinates.targetScale = scale;\n\n                let scrollTopPos = document.documentElement.scrollTop || document.body.scrollTop;\n\n                this.controlCoordinates.pinchOffsetX = event.pageX;\n                this.controlCoordinates.pinchOffsetY = event.pageY - scrollTopPos || 0; // need to substract the scroll position\n\n                this.controlCoordinates.limitOffsetX = ((this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) - this.controlCoordinates.containerWidth) / 2;\n                this.controlCoordinates.limitOffsetY = ((this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) - this.controlCoordinates.containerHeight) / 2;\n                this.controlCoordinates.scaleDifference = this.controlCoordinates.targetScale - this.controlCoordinates.initialScale;\n                this.controlCoordinates.targetOffsetX = (this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerWidth ? 0 : this.minMax(this.controlCoordinates.initialOffsetX - ((((((this.controlCoordinates.pinchOffsetX - this.controlCoordinates.containerOffsetX) - (this.controlCoordinates.containerWidth / 2)) - this.controlCoordinates.initialOffsetX) / (this.controlCoordinates.targetScale - this.controlCoordinates.scaleDifference))) * this.controlCoordinates.scaleDifference), this.controlCoordinates.limitOffsetX * (-1), this.controlCoordinates.limitOffsetX);\n                this.controlCoordinates.targetOffsetY = (this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerHeight ? 0 : this.minMax(this.controlCoordinates.initialOffsetY - ((((((this.controlCoordinates.pinchOffsetY - this.controlCoordinates.containerOffsetY) - (this.controlCoordinates.containerHeight / 2)) - this.controlCoordinates.initialOffsetY) / (this.controlCoordinates.targetScale - this.controlCoordinates.scaleDifference))) * this.controlCoordinates.scaleDifference), this.controlCoordinates.limitOffsetY * (-1), this.controlCoordinates.limitOffsetY);\n\n                this.zoomPanElement(this.controlCoordinates.targetOffsetX + \"px\", this.controlCoordinates.targetOffsetY + \"px\", this.controlCoordinates.targetScale);\n\n                if (this.controlCoordinates.targetScale > 1) {\n                    this.controlCoordinates.zoomed = true;\n                    if ( (!this.domNodes.caption.style.opacity || this.domNodes.caption.style.opacity > 0) && this.domNodes.caption.style.display !== 'none') {\n                        this.fadeOut(this.domNodes.caption, this.options.fadeSpeed);\n                    }\n                } else {\n                    if (this.controlCoordinates.initialScale === 1) {\n                        this.controlCoordinates.zoomed = false;\n                        if (this.domNodes.caption.style.display === 'none') {\n                            this.fadeIn(this.domNodes.caption, this.options.fadeSpeed);\n                        }\n                    }\n                    this.controlCoordinates.initialPinchDistance = null;\n                    this.controlCoordinates.capture = false;\n                }\n\n                this.controlCoordinates.initialPinchDistance = this.controlCoordinates.targetPinchDistance;\n                this.controlCoordinates.initialScale = this.controlCoordinates.targetScale;\n                this.controlCoordinates.initialOffsetX = this.controlCoordinates.targetOffsetX;\n                this.controlCoordinates.initialOffsetY = this.controlCoordinates.targetOffsetY;\n\n                this.setZoomData(this.controlCoordinates.targetScale, this.controlCoordinates.targetOffsetX, this.controlCoordinates.targetOffsetY);\n                this.zoomPanElement(this.controlCoordinates.targetOffsetX + \"px\", this.controlCoordinates.targetOffsetY + \"px\", this.controlCoordinates.targetScale);\n\n            });\n        }\n\n        this.addEventListener(this.domNodes.image, ['touchstart.' + this.eventNamespace, 'mousedown.' + this.eventNamespace], (event) => {\n            if (event.target.tagName === 'A' && event.type === 'touchstart') {\n                return true;\n            }\n\n            if (event.type === 'mousedown') {\n                event.preventDefault();\n                this.controlCoordinates.initialPointerOffsetX = event.clientX;\n                this.controlCoordinates.initialPointerOffsetY = event.clientY;\n                this.controlCoordinates.containerHeight = this.getDimensions(this.domNodes.image).height;\n                this.controlCoordinates.containerWidth = this.getDimensions(this.domNodes.image).width;\n                this.controlCoordinates.imgHeight = this.getDimensions(this.currentImage).height;\n                this.controlCoordinates.imgWidth = this.getDimensions(this.currentImage).width;\n                this.controlCoordinates.containerOffsetX = this.domNodes.image.offsetLeft;\n                this.controlCoordinates.containerOffsetY = this.domNodes.image.offsetTop;\n\n                this.controlCoordinates.initialOffsetX = parseFloat(this.currentImage.dataset.translateX);\n                this.controlCoordinates.initialOffsetY = parseFloat(this.currentImage.dataset.translateY);\n                this.controlCoordinates.capture = true;\n            } else {\n                this.controlCoordinates.touchCount = event.touches.length;\n                this.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\n                this.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\n                this.controlCoordinates.containerHeight = this.getDimensions(this.domNodes.image).height;\n                this.controlCoordinates.containerWidth = this.getDimensions(this.domNodes.image).width;\n                this.controlCoordinates.imgHeight = this.getDimensions(this.currentImage).height;\n                this.controlCoordinates.imgWidth = this.getDimensions(this.currentImage).width;\n                this.controlCoordinates.containerOffsetX = this.domNodes.image.offsetLeft;\n                this.controlCoordinates.containerOffsetY = this.domNodes.image.offsetTop;\n\n                if (this.controlCoordinates.touchCount === 1) /* Single touch */ {\n                    if (!this.controlCoordinates.doubleTapped) {\n                        this.controlCoordinates.doubleTapped = true;\n                        setTimeout(() => {\n                            this.controlCoordinates.doubleTapped = false;\n                        }, 300);\n                    } else {\n\n                        this.currentImage.classList.add('sl-transition');\n                        if (!this.controlCoordinates.zoomed) {\n                            this.controlCoordinates.initialScale = this.options.doubleTapZoom;\n                            this.setZoomData(this.controlCoordinates.initialScale,0, 0);\n                            this.zoomPanElement(0 + \"px\", 0 + \"px\", this.controlCoordinates.initialScale);\n\n\n                            if ( (!this.domNodes.caption.style.opacity || this.domNodes.caption.style.opacity > 0) && this.domNodes.caption.style.display !== 'none') {\n                                this.fadeOut(this.domNodes.caption, this.options.fadeSpeed);\n                            }\n\n                            this.controlCoordinates.zoomed = true;\n                        } else {\n                            this.controlCoordinates.initialScale = 1;\n                            this.setZoomData(this.controlCoordinates.initialScale,0, 0);\n                            this.zoomPanElement(0 + \"px\", 0 + \"px\", this.controlCoordinates.initialScale);\n                            this.controlCoordinates.zoomed = false;\n                        }\n\n                        setTimeout(() => {\n                            if (this.currentImage) {\n                                this.currentImage.classList.remove('sl-transition');\n                            }\n                        }, 200);\n                        return false;\n                    }\n\n                    this.controlCoordinates.initialOffsetX  = parseFloat(this.currentImage.dataset.translateX);\n                    this.controlCoordinates.initialOffsetY = parseFloat(this.currentImage.dataset.translateY);\n                }\n                else if (this.controlCoordinates.touchCount === 2) /* Pinch */ {\n                    this.controlCoordinates.initialPointerOffsetX2 = event.touches[1].clientX;\n                    this.controlCoordinates.initialPointerOffsetY2 = event.touches[1].clientY;\n                    this.controlCoordinates.initialOffsetX = parseFloat(this.currentImage.dataset.translateX);\n                    this.controlCoordinates.initialOffsetY = parseFloat(this.currentImage.dataset.translateY);\n                    this.controlCoordinates.pinchOffsetX = (this.controlCoordinates.initialPointerOffsetX + this.controlCoordinates.initialPointerOffsetX2) / 2;\n                    this.controlCoordinates.pinchOffsetY = (this.controlCoordinates.initialPointerOffsetY + this.controlCoordinates.initialPointerOffsetY2) / 2;\n                    this.controlCoordinates.initialPinchDistance = Math.sqrt(((this.controlCoordinates.initialPointerOffsetX - this.controlCoordinates.initialPointerOffsetX2) * (this.controlCoordinates.initialPointerOffsetX - this.controlCoordinates.initialPointerOffsetX2)) + ((this.controlCoordinates.initialPointerOffsetY - this.controlCoordinates.initialPointerOffsetY2) * (this.controlCoordinates.initialPointerOffsetY - this.controlCoordinates.initialPointerOffsetY2)));\n                }\n                this.controlCoordinates.capture = true;\n            }\n            if(this.controlCoordinates.mousedown) return true;\n            if (this.transitionCapable) {\n                this.controlCoordinates.imageLeft = parseInt(this.domNodes.image.style.left, 10);\n            }\n            this.controlCoordinates.mousedown = true;\n            this.controlCoordinates.swipeDiff = 0;\n            this.controlCoordinates.swipeYDiff = 0;\n            this.controlCoordinates.swipeStart = event.pageX || event.touches[0].pageX;\n            this.controlCoordinates.swipeYStart = event.pageY || event.touches[0].pageY;\n\n            return false;\n        });\n\n        this.addEventListener(this.domNodes.image, ['touchmove.' + this.eventNamespace, 'mousemove.' + this.eventNamespace, 'MSPointerMove'], (event) => {\n\n\n            if (!this.controlCoordinates.mousedown) {\n                return true;\n            }\n\n            if (event.type === 'touchmove') {\n                if (this.controlCoordinates.capture === false) {\n                    return false;\n                }\n\n                this.controlCoordinates.pointerOffsetX = event.touches[0].clientX;\n                this.controlCoordinates.pointerOffsetY = event.touches[0].clientY;\n                this.controlCoordinates.touchCount = event.touches.length;\n                this.controlCoordinates.touchmoveCount++;\n\n                if (this.controlCoordinates.touchCount > 1) /* Pinch */ {\n                    this.controlCoordinates.pointerOffsetX2 = event.touches[1].clientX;\n                    this.controlCoordinates.pointerOffsetY2 = event.touches[1].clientY;\n                    this.controlCoordinates.targetPinchDistance = Math.sqrt(((this.controlCoordinates.pointerOffsetX - this.controlCoordinates.pointerOffsetX2) * (this.controlCoordinates.pointerOffsetX - this.controlCoordinates.pointerOffsetX2)) + ((this.controlCoordinates.pointerOffsetY - this.controlCoordinates.pointerOffsetY2) * (this.controlCoordinates.pointerOffsetY - this.controlCoordinates.pointerOffsetY2)));\n                    if (this.controlCoordinates.initialPinchDistance === null) {\n                        this.controlCoordinates.initialPinchDistance = this.controlCoordinates.targetPinchDistance;\n                    }\n\n                    if (Math.abs(this.controlCoordinates.initialPinchDistance - this.controlCoordinates.targetPinchDistance) >= 1) {\n                        /* Initialize helpers */\n                        this.controlCoordinates.targetScale = this.minMax(this.controlCoordinates.targetPinchDistance / this.controlCoordinates.initialPinchDistance * this.controlCoordinates.initialScale, 1, this.options.maxZoom);\n                        this.controlCoordinates.limitOffsetX = ((this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) - this.controlCoordinates.containerWidth) / 2;\n                        this.controlCoordinates.limitOffsetY = ((this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) - this.controlCoordinates.containerHeight) / 2;\n                        this.controlCoordinates.scaleDifference = this.controlCoordinates.targetScale - this.controlCoordinates.initialScale;\n                        this.controlCoordinates.targetOffsetX = (this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerWidth ? 0 : this.minMax(this.controlCoordinates.initialOffsetX - ((((((this.controlCoordinates.pinchOffsetX - this.controlCoordinates.containerOffsetX) - (this.controlCoordinates.containerWidth / 2)) - this.controlCoordinates.initialOffsetX) / (this.controlCoordinates.targetScale - this.controlCoordinates.scaleDifference))) * this.controlCoordinates.scaleDifference), this.controlCoordinates.limitOffsetX * (-1), this.controlCoordinates.limitOffsetX);\n                        this.controlCoordinates.targetOffsetY = (this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerHeight ? 0 : this.minMax(this.controlCoordinates.initialOffsetY - ((((((this.controlCoordinates.pinchOffsetY - this.controlCoordinates.containerOffsetY) - (this.controlCoordinates.containerHeight / 2)) - this.controlCoordinates.initialOffsetY) / (this.controlCoordinates.targetScale - this.controlCoordinates.scaleDifference))) * this.controlCoordinates.scaleDifference), this.controlCoordinates.limitOffsetY * (-1), this.controlCoordinates.limitOffsetY);\n\n                        this.zoomPanElement(this.controlCoordinates.targetOffsetX + \"px\", this.controlCoordinates.targetOffsetY + \"px\", this.controlCoordinates.targetScale);\n\n                        if (this.controlCoordinates.targetScale > 1) {\n                            this.controlCoordinates.zoomed = true;\n                            if ((!this.domNodes.caption.style.opacity || this.domNodes.caption.style.opacity > 0) && this.domNodes.caption.style.display !== 'none') {\n                                this.fadeOut(this.domNodes.caption, this.options.fadeSpeed);\n                            }\n                        }\n\n                        this.controlCoordinates.initialPinchDistance = this.controlCoordinates.targetPinchDistance;\n                        this.controlCoordinates.initialScale = this.controlCoordinates.targetScale;\n                        this.controlCoordinates.initialOffsetX = this.controlCoordinates.targetOffsetX;\n                        this.controlCoordinates.initialOffsetY = this.controlCoordinates.targetOffsetY;\n                    }\n                } else {\n                    this.controlCoordinates.targetScale = this.controlCoordinates.initialScale;\n                    this.controlCoordinates.limitOffsetX = ((this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) - this.controlCoordinates.containerWidth) / 2;\n                    this.controlCoordinates.limitOffsetY = ((this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) - this.controlCoordinates.containerHeight) / 2;\n                    this.controlCoordinates.targetOffsetX = (this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerWidth ? 0 : this.minMax(this.controlCoordinates.pointerOffsetX - (this.controlCoordinates.initialPointerOffsetX - this.controlCoordinates.initialOffsetX), this.controlCoordinates.limitOffsetX * (-1), this.controlCoordinates.limitOffsetX);\n                    this.controlCoordinates.targetOffsetY = (this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerHeight ? 0 : this.minMax(this.controlCoordinates.pointerOffsetY - (this.controlCoordinates.initialPointerOffsetY - this.controlCoordinates.initialOffsetY), this.controlCoordinates.limitOffsetY * (-1), this.controlCoordinates.limitOffsetY);\n\n                    if (Math.abs(this.controlCoordinates.targetOffsetX) === Math.abs(this.controlCoordinates.limitOffsetX)) {\n                        this.controlCoordinates.initialOffsetX = this.controlCoordinates.targetOffsetX;\n                        this.controlCoordinates.initialPointerOffsetX = this.controlCoordinates.pointerOffsetX;\n                    }\n\n                    if (Math.abs(this.controlCoordinates.targetOffsetY) === Math.abs(this.controlCoordinates.limitOffsetY)) {\n                        this.controlCoordinates.initialOffsetY = this.controlCoordinates.targetOffsetY;\n                        this.controlCoordinates.initialPointerOffsetY = this.controlCoordinates.pointerOffsetY;\n                    }\n\n                    this.setZoomData(this.controlCoordinates.initialScale, this.controlCoordinates.targetOffsetX, this.controlCoordinates.targetOffsetY);\n                    this.zoomPanElement(this.controlCoordinates.targetOffsetX + \"px\", this.controlCoordinates.targetOffsetY + \"px\", this.controlCoordinates.targetScale);\n                }\n            }\n\n            /* Mouse Move implementation */\n            if (event.type === 'mousemove' && this.controlCoordinates.mousedown) {\n              if(event.type == 'touchmove') return true;\n\n                event.preventDefault();\n\n              if(this.controlCoordinates.capture === false) return false;\n\n              this.controlCoordinates.pointerOffsetX = event.clientX;\n              this.controlCoordinates.pointerOffsetY = event.clientY;\n\n              this.controlCoordinates.targetScale = this.controlCoordinates.initialScale;\n              this.controlCoordinates.limitOffsetX = ((this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) - this.controlCoordinates.containerWidth) / 2;\n              this.controlCoordinates.limitOffsetY = ((this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) - this.controlCoordinates.containerHeight) / 2;\n              this.controlCoordinates.targetOffsetX = (this.controlCoordinates.imgWidth * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerWidth ? 0 : this.minMax(this.controlCoordinates.pointerOffsetX - (this.controlCoordinates.initialPointerOffsetX - this.controlCoordinates.initialOffsetX), this.controlCoordinates.limitOffsetX * (-1), this.controlCoordinates.limitOffsetX);\n              this.controlCoordinates.targetOffsetY = (this.controlCoordinates.imgHeight * this.controlCoordinates.targetScale) <= this.controlCoordinates.containerHeight ? 0 : this.minMax(this.controlCoordinates.pointerOffsetY - (this.controlCoordinates.initialPointerOffsetY - this.controlCoordinates.initialOffsetY), this.controlCoordinates.limitOffsetY * (-1), this.controlCoordinates.limitOffsetY);\n\n              if (Math.abs(this.controlCoordinates.targetOffsetX) === Math.abs(this.controlCoordinates.limitOffsetX)) {\n                  this.controlCoordinates.initialOffsetX = this.controlCoordinates.targetOffsetX;\n                  this.controlCoordinates.initialPointerOffsetX = this.controlCoordinates.pointerOffsetX;\n              }\n\n              if (Math.abs(this.controlCoordinates.targetOffsetY) === Math.abs(this.controlCoordinates.limitOffsetY)) {\n                  this.controlCoordinates.initialOffsetY = this.controlCoordinates.targetOffsetY;\n                  this.controlCoordinates.initialPointerOffsetY = this.controlCoordinates.pointerOffsetY;\n              }\n\n              this.setZoomData(this.controlCoordinates.initialScale, this.controlCoordinates.targetOffsetX, this.controlCoordinates.targetOffsetY);\n              this.zoomPanElement(this.controlCoordinates.targetOffsetX + \"px\", this.controlCoordinates.targetOffsetY + \"px\", this.controlCoordinates.targetScale);\n\n            }\n\n            if (!this.controlCoordinates.zoomed) {\n\n                this.controlCoordinates.swipeEnd = event.pageX || event.touches[0].pageX;\n                this.controlCoordinates.swipeYEnd = event.pageY || event.touches[0].pageY;\n                this.controlCoordinates.swipeDiff = this.controlCoordinates.swipeStart - this.controlCoordinates.swipeEnd;\n                this.controlCoordinates.swipeYDiff = this.controlCoordinates.swipeYStart - this.controlCoordinates.swipeYEnd;\n                if (this.options.animationSlide) {\n                    this.slide(0, -this.controlCoordinates.swipeDiff + 'px');\n                }\n            }\n\n        });\n\n\n        this.addEventListener(this.domNodes.image, ['touchend.' + this.eventNamespace, 'mouseup.' + this.eventNamespace, 'touchcancel.' + this.eventNamespace, 'mouseleave.' + this.eventNamespace, 'pointerup', 'pointercancel', 'MSPointerUp', 'MSPointerCancel'], (event) => {\n\n\n            if (this.isTouchDevice && event.type === 'touchend') {\n                this.controlCoordinates.touchCount = event.touches.length;\n                if (this.controlCoordinates.touchCount === 0) /* No touch */ {\n                    /* Set attributes */\n                    if (this.currentImage) {\n                        this.setZoomData(this.controlCoordinates.initialScale, this.controlCoordinates.targetOffsetX, this.controlCoordinates.targetOffsetY);\n                    }\n                    if (this.controlCoordinates.initialScale === 1) {\n                        this.controlCoordinates.zoomed = false;\n                        if (this.domNodes.caption.style.display === 'none') {\n                            this.fadeIn(this.domNodes.caption, this.options.fadeSpeed);\n                        }\n                    }\n                    this.controlCoordinates.initialPinchDistance = null;\n                    this.controlCoordinates.capture = false;\n                } else if (this.controlCoordinates.touchCount === 1) /* Single touch */ {\n                    this.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\n                    this.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\n                } else if (this.controlCoordinates.touchCount > 1) /* Pinch */ {\n                    this.controlCoordinates.initialPinchDistance = null;\n                }\n            }\n\n\n            if (this.controlCoordinates.mousedown) {\n                this.controlCoordinates.mousedown = false;\n                let possibleDir = true;\n                if (!this.options.loop) {\n                    if (this.currentImageIndex === 0 && this.controlCoordinates.swipeDiff < 0) {\n                        possibleDir = false;\n                    }\n                    if (this.currentImageIndex >= this.relatedElements.length - 1 && this.controlCoordinates.swipeDiff > 0) {\n                        possibleDir = false;\n                    }\n                }\n                if (Math.abs(this.controlCoordinates.swipeDiff) > this.options.swipeTolerance && possibleDir) {\n                    this.loadImage(this.controlCoordinates.swipeDiff > 0 ? 1 : -1);\n                }\n                else if (this.options.animationSlide) {\n                    this.slide(this.options.animationSpeed / 1000, 0 + 'px');\n                }\n\n                if (this.options.swipeClose && Math.abs(this.controlCoordinates.swipeYDiff) > 50 && Math.abs(this.controlCoordinates.swipeDiff) < this.options.swipeTolerance) {\n                    this.close();\n                }\n            }\n        });\n\n        this.addEventListener(this.domNodes.image, ['dblclick'], (event) => {\n            if(this.isTouchDevice) return;\n            this.controlCoordinates.initialPointerOffsetX = event.clientX;\n            this.controlCoordinates.initialPointerOffsetY = event.clientY;\n            this.controlCoordinates.containerHeight = this.getDimensions(this.domNodes.image).height;\n            this.controlCoordinates.containerWidth = this.getDimensions(this.domNodes.image).width;\n            this.controlCoordinates.imgHeight = this.getDimensions(this.currentImage).height;\n            this.controlCoordinates.imgWidth = this.getDimensions(this.currentImage).width;\n            this.controlCoordinates.containerOffsetX = this.domNodes.image.offsetLeft;\n            this.controlCoordinates.containerOffsetY = this.domNodes.image.offsetTop;\n\n            this.currentImage.classList.add('sl-transition');\n\n            if(!this.controlCoordinates.zoomed) {\n                this.controlCoordinates.initialScale = this.options.doubleTapZoom;\n                this.setZoomData(this.controlCoordinates.initialScale, 0, 0);\n                this.zoomPanElement(0 + \"px\", 0 + \"px\", this.controlCoordinates.initialScale);\n                if ((!this.domNodes.caption.style.opacity || this.domNodes.caption.style.opacity > 0) && this.domNodes.caption.style.display !== 'none') {\n                    this.fadeOut(this.domNodes.caption, this.options.fadeSpeed);\n                }\n                this.controlCoordinates.zoomed = true;\n            } else {\n                this.controlCoordinates.initialScale = 1;\n                this.setZoomData(this.controlCoordinates.initialScale, 0, 0);\n                this.zoomPanElement(0 + \"px\", 0 + \"px\", this.controlCoordinates.initialScale);\n                this.controlCoordinates.zoomed = false;\n                if (this.domNodes.caption.style.display === 'none') {\n                    this.fadeIn(this.domNodes.caption, this.options.fadeSpeed);\n                }\n\n            }\n            setTimeout(() => {\n                if (this.currentImage) {\n                    this.currentImage.classList.remove('sl-transition');\n                    this.currentImage.style[this.transitionPrefix + 'transform-origin'] = null;\n                }\n            }, 200);\n\n            this.controlCoordinates.capture = true;\n            return false;\n        });\n\n    }\n\n    getDimensions(element) {\n        let styles = window.getComputedStyle(element),\n            height = element.offsetHeight,\n            width = element.offsetWidth,\n            borderTopWidth = parseFloat(styles.borderTopWidth),\n            borderBottomWidth = parseFloat(styles.borderBottomWidth),\n            paddingTop = parseFloat(styles.paddingTop),\n            paddingBottom = parseFloat(styles.paddingBottom),\n            borderLeftWidth = parseFloat(styles.borderLeftWidth),\n            borderRightWidth = parseFloat(styles.borderRightWidth),\n            paddingLeft = parseFloat(styles.paddingLeft),\n            paddingRight = parseFloat(styles.paddingRight);\n        return {\n            height: height - borderBottomWidth - borderTopWidth - paddingTop - paddingBottom,\n            width: width - borderLeftWidth - borderRightWidth - paddingLeft - paddingRight\n        };\n    }\n\n    updateHash() {\n        let newHash = 'pid=' + (this.currentImageIndex + 1),\n            newURL = window.location.href.split('#')[0] + '#' + newHash;\n\n        this.hashReseted = false;\n\n        if (this.pushStateSupport) {\n            window.history[this.historyHasChanges ? 'replaceState' : 'pushState']('', document.title, newURL);\n        } else {\n            // what is the browser target of this?\n            if (this.historyHasChanges) {\n                window.location.replace(newURL);\n            } else {\n                window.location.hash = newHash;\n            }\n        }\n        if(!this.historyHasChanges) {\n            this.urlChangedOnce = true;\n        }\n\n        this.historyHasChanges = true;\n    }\n\n    resetHash() {\n        this.hashReseted = true;\n        if(this.urlChangedOnce) {\n            history.back();\n        } else {\n            if (this.pushStateSupport) {\n                history.pushState('', document.title, window.location.pathname + window.location.search);\n            } else {\n                window.location.hash = '';\n            }\n        }\n        //\n        //in case an history operation is still pending\n        clearTimeout(this.historyUpdateTimeout);\n    }\n\n    updateURL() {\n        clearTimeout(this.historyUpdateTimeout);\n        if (!this.historyHasChanges) {\n            this.updateHash(); // first time\n        } else {\n            this.historyUpdateTimeout = setTimeout(this.updateHash.bind(this), 800);\n        }\n    }\n\n    setCaption(captionText, imageWidth) {\n        if (this.options.captions && captionText && captionText !== '' && typeof captionText !== \"undefined\") {\n            this.hide(this.domNodes.caption);\n            this.domNodes.caption.style.width = imageWidth + 'px';\n            this.domNodes.caption.innerHTML = captionText;\n\n            this.domNodes.image.appendChild(this.domNodes.caption);\n\n            setTimeout(() => {\n                this.fadeIn(this.domNodes.caption, this.options.fadeSpeed);\n            }, this.options.captionDelay);\n        }\n    }\n\n    slide(speed, pos) {\n        if (!this.transitionCapable) {\n            return this.domNodes.image.style.left = pos;\n        }\n\n        this.domNodes.image.style[this.transitionPrefix + 'transform'] = 'translateX(' + pos + ')';\n        this.domNodes.image.style[this.transitionPrefix + 'transition'] = this.transitionPrefix + 'transform ' + speed + 's linear';\n    }\n\n    getRelated(rel) {\n        let elems;\n        if (rel && rel !== false && rel !== 'nofollow') {\n            elems = Array.from(this.elements).filter(element => element.getAttribute('rel') === rel);\n        } else {\n            elems = this.elements;\n        }\n        return elems;\n    }\n\n    openImage(element) {\n        element.dispatchEvent(new Event('show.' + this.eventNamespace));\n\n        this.globalScrollbarWidth = this.getScrollbarWidth();\n        if (this.options.disableScroll) {\n            this.toggleScrollbar('hide');\n            this.globalScrollbarWidth = 0;\n        }\n\n        if (this.options.htmlClass && this.options.htmlClass !== '') {\n            document.querySelector('html').classList.add(this.options.htmlClass);\n        }\n\n        document.body.appendChild(this.domNodes.wrapper);\n\n        this.domNodes.wrapper.appendChild(this.domNodes.image);\n        if (this.options.overlay) {\n            document.body.appendChild(this.domNodes.overlay);\n        }\n\n        this.relatedElements = this.getRelated(element.rel);\n\n        if (this.options.showCounter) {\n            if (this.relatedElements.length == 1 && this.domNodes.wrapper.contains(this.domNodes.counter)) {\n                this.domNodes.wrapper.removeChild(this.domNodes.counter);\n            } else if(this.relatedElements.length > 1 && !this.domNodes.wrapper.contains(this.domNodes.counter)) {\n                this.domNodes.wrapper.appendChild(this.domNodes.counter);\n            }\n        }\n\n        if (this.options.download && this.domNodes.download) {\n            this.domNodes.wrapper.appendChild(this.domNodes.download);\n        }\n\n        this.isAnimating = true;\n\n        this.currentImageIndex = this.relatedElements.indexOf(element);\n\n        let targetURL = element.getAttribute(this.options.sourceAttr);\n\n        this.currentImage = document.createElement('img');\n        this.currentImage.style.display = 'none';\n        this.currentImage.setAttribute('src', targetURL);\n        this.currentImage.dataset.scale = 1;\n        this.currentImage.dataset.translateX = 0;\n        this.currentImage.dataset.translateY = 0;\n\n        if (this.loadedImages.indexOf(targetURL) === -1) {\n            this.loadedImages.push(targetURL);\n        }\n\n        this.domNodes.image.innerHTML = '';\n        this.domNodes.image.setAttribute('style', '');\n\n        this.domNodes.image.appendChild(this.currentImage);\n\n\n        this.fadeIn(this.domNodes.overlay, this.options.fadeSpeed);\n        this.fadeIn([this.domNodes.counter, this.domNodes.navigation, this.domNodes.closeButton, this.domNodes.download], this.options.fadeSpeed);\n\n        this.show(this.domNodes.spinner);\n        this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\n        this.domNodes.counter.querySelector('.sl-total').innerHTML = this.relatedElements.length;\n\n        this.adjustImage();\n        if (this.options.preloading) {\n            this.preload();\n        }\n\n        setTimeout(() => {\n            element.dispatchEvent(new Event('shown.' + this.eventNamespace));\n        }, this.options.animationSpeed);\n    }\n\n    forceFocus() {\n        this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n        this.addEventListener(document, 'focusin.' + this.eventNamespace, event => {\n            if (document !== event.target &&\n                this.domNodes.wrapper !== event.target &&\n                !this.domNodes.wrapper.contains(event.target)) {\n                this.domNodes.wrapper.focus();\n            }\n        });\n    }\n\n    // utility\n    addEventListener(elements, events, callback, opts) {\n        elements = this.wrap(elements);\n        events = this.wrap(events);\n\n        for (let element of elements) {\n            if (!element.namespaces) {\n                element.namespaces = {};\n            } // save the namespaces addEventListener the DOM element itself\n\n            for (let event of events) {\n                let options = opts || false;\n                let needsPassiveFix = ['touchstart', 'touchmove','mousewheel','DOMMouseScroll'].indexOf(event.split('.')[0]) >= 0;\n                if (needsPassiveFix && this.isPassiveEventsSupported) {\n                    if (typeof options === 'object') {\n                        options.passive = true;\n                    } else {\n                        options = {passive: true};\n                    }\n                }\n\n                element.namespaces[event] = callback;\n                element.addEventListener(event.split('.')[0], callback, options);\n            }\n        }\n    }\n\n    removeEventListener(elements, events) {\n        elements = this.wrap(elements);\n        events = this.wrap(events);\n        for (let element of elements) {\n            for (let event of events) {\n                if(element.namespaces && element.namespaces[event]) {\n                    element.removeEventListener(event.split('.')[0], element.namespaces[event]);\n                    delete element.namespaces[event];\n                }\n            }\n        }\n    }\n\n    fadeOut(elements, duration, callback) {\n        elements = this.wrap(elements);\n        for (let element of elements) {\n            element.style.opacity = parseFloat(element) || window.getComputedStyle(element).getPropertyValue(\"opacity\");\n        }\n\n        this.isFadeIn = false;\n\n        let step = 16.66666 / (duration || this.options.fadeSpeed),\n            fade = () => {\n                let currentOpacity = parseFloat(elements[0].style.opacity);\n                if ((currentOpacity -= step) < 0) {\n                    for (let element of elements) {\n                        element.style.display = \"none\";\n                        // element.style.opacity = '';\n                        element.style.opacity = 1;\n                    }\n                    callback && callback.call(this, elements);\n                } else {\n                    for (let element of elements) {\n                        element.style.opacity = currentOpacity;\n                    }\n                    requestAnimationFrame(fade);\n                }\n            };\n\n        fade();\n    }\n\n    fadeIn(elements, duration, callback, display) {\n        elements = this.wrap(elements);\n        for (let element of elements) {\n            if(element) {\n                element.style.opacity = 0;\n                element.style.display = display || \"block\";\n            }\n        }\n\n        this.isFadeIn = true;\n\n        let opacityTarget = parseFloat(elements[0].dataset.opacityTarget || 1),\n            step = (16.66666 * opacityTarget) / (duration || this.options.fadeSpeed),\n            fade = () => {\n                let currentOpacity = parseFloat(elements[0].style.opacity);\n                if (!((currentOpacity += step) > opacityTarget)) {\n                    for (let element of elements) {\n                        if(element) {\n                            element.style.opacity = currentOpacity;\n                        }\n                    }\n                    if(!this.isFadeIn) return;\n                    requestAnimationFrame(fade);\n                } else {\n                    for (let element of elements) {\n                        if(element) {\n                            element.style.opacity = opacityTarget;\n                        }\n                    }\n                    callback && callback.call(this, elements);\n                }\n            };\n\n        fade();\n    }\n\n    hide(elements) {\n        elements = this.wrap(elements);\n        for (let element of elements) {\n            if(element.style.display != 'none') {\n                element.dataset.initialDisplay = element.style.display;\n            }\n            element.style.display = 'none';\n        }\n    }\n\n    show(elements, display) {\n        elements = this.wrap(elements);\n        for (let element of elements) {\n            element.style.display = element.dataset.initialDisplay || display || 'block';\n        }\n    }\n\n    wrap(input) {\n        return typeof input[Symbol.iterator] === 'function' && typeof input !== 'string' ? input : [input];\n    }\n\n    on(events, callback) {\n        events = this.wrap(events);\n        for (let element of this.elements) {\n            if (!element.fullyNamespacedEvents) {\n                element.fullyNamespacedEvents = {};\n            }\n            for (let event of events) {\n                element.fullyNamespacedEvents[event] = callback;\n                element.addEventListener(event, callback);\n            }\n        }\n        return this;\n    }\n\n    off(events) {\n        events = this.wrap(events);\n        for (let element of this.elements) {\n            for (let event of events) {\n                if (typeof element.fullyNamespacedEvents !== 'undefined' && event in element.fullyNamespacedEvents) {\n                    element.removeEventListener(event, element.fullyNamespacedEvents[event]);\n                }\n            }\n        }\n        return this;\n    }\n\n    // api\n\n    open(elem, position = 0) {\n        elem = elem || this.elements[0];\n        if(typeof jQuery !== \"undefined\" && elem instanceof jQuery) {\n            elem = elem.get(0);\n        }\n        if(position > 0) {\n            elem = this.elements[position];\n        }\n        this.initialImageIndex = this.elements.indexOf(elem);\n        if(this.initialImageIndex > -1) {\n            this.openImage(elem);\n        }\n    }\n\n    openPosition(position) {\n        let elem = this.elements[position];\n        this.open(elem, position)\n    }\n    next() {\n        this.loadImage(1);\n    }\n\n    prev() {\n        this.loadImage(-1);\n    }\n\n    // get some useful data\n    getLighboxData() {\n        return {\n            currentImageIndex: this.currentImageIndex,\n            currentImage: this.currentImage,\n            globalScrollbarWidth: this.globalScrollbarWidth\n        };\n    }\n\n    //close is exposed anyways..\n\n    destroy() {\n        //remove all custom event listeners from elements\n        this.off([\n            'close.' + this.eventNamespace,\n            'closed.' + this.eventNamespace,\n            'nextImageLoaded.' + this.eventNamespace,\n            'prevImageLoaded.' + this.eventNamespace,\n            'change.' + this.eventNamespace,\n            'nextDone.' + this.eventNamespace,\n            'prevDone.' + this.eventNamespace,\n            'error.' + this.eventNamespace,\n            'changed.' + this.eventNamespace,\n            'next.' + this.eventNamespace,\n            'prev.' + this.eventNamespace,\n            'show.' + this.eventNamespace,\n            'shown.' + this.eventNamespace\n        ]);\n\n        this.removeEventListener(this.elements, 'click.' + this.eventNamespace);\n        this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n        this.removeEventListener(document.body, 'contextmenu.' + this.eventNamespace);\n        this.removeEventListener(document.body, 'keyup.' + this.eventNamespace);\n\n        this.removeEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace);\n        this.removeEventListener(this.domNodes.closeButton, 'click.' + this.eventNamespace);\n        this.removeEventListener(window, 'resize.' + this.eventNamespace);\n        this.removeEventListener(window, 'hashchange.' + this.eventNamespace);\n\n        this.close();\n        if (this.isOpen) {\n            document.body.removeChild(this.domNodes.wrapper);\n            document.body.removeChild(this.domNodes.overlay);\n        }\n\n        this.elements = null;\n    }\n\n    refresh() {\n        if (!this.initialSelector) {\n            throw 'refreshing only works when you initialize using a selector!';\n        }\n\n        let options = this.options,\n            selector = this.initialSelector;\n\n        this.destroy();\n\n        this.constructor(selector, options);\n\n        return this;\n    }\n}\nexport default SimpleLightbox;\n\nglobal.SimpleLightbox = SimpleLightbox;\n","import SimpleLightbox from \"simplelightbox/dist/simple-lightbox.esm\";\r\n\r\nexport const galleryItems = [\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/16/43/rchids-4202820__480.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/16/43/rchids-4202820_1280.jpg\",\r\n    description: \"Hokkaido Flower\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/14/22/05/container-4203677_1280.jpg\",\r\n    description: \"Container Haulage Freight\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/09/47/beach-4206785_1280.jpg\",\r\n    description: \"Aerial Beach View\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2016/11/18/16/19/flowers-1835619_1280.jpg\",\r\n    description: \"Flower Blooms\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2018/09/13/10/36/mountains-3674334_1280.jpg\",\r\n    description: \"Alpine Mountains\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/23/04/landscape-4208571_1280.jpg\",\r\n    description: \"Mountain Lake Sailing\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/09/27/the-alps-4209272_1280.jpg\",\r\n    description: \"Alpine Spring Meadows\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/16/21/10/landscape-4208255_1280.jpg\",\r\n    description: \"Nature Landscape\",\r\n  },\r\n  {\r\n    preview:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843__340.jpg\",\r\n    original:\r\n      \"https://cdn.pixabay.com/photo/2019/05/17/04/35/lighthouse-4208843_1280.jpg\",\r\n    description: \"Lighthouse Coast Sea\",\r\n  },\r\n];\r\n\r\nconst galleryEl = document.querySelector(\".gallery\");\r\nconst myMarkUp = createGalleryMarkup(galleryItems);\r\n\r\ngalleryEl.innerHTML = myMarkUp;\r\n\r\n// galleryEl.addEventListener(\"click\", onModalOpen);\r\n\r\n// function onModalOpen(e) {\r\n//   e.preventDefault();\r\n//   if (event.target.classList.value !== \"gallery__image\") {\r\n//     return;\r\n//   }\r\n\r\n//   const instance = basicLightbox.create(\r\n//     `\r\n// \t\t<img width=\"1400\" height=\"900\" src=\"${e.target.dataset.source}\">\r\n// \t`\r\n//   );\r\n\r\n//   instance.show();\r\n\r\n//   galleryEl.addEventListener(\"keydown\", (e) => {\r\n//     if (e.code === \"Escape\") {\r\n//       instance.close();\r\n//     }\r\n//   });\r\n// }\r\n\r\nfunction createGalleryMarkup(gallery) {\r\n  return gallery\r\n    .map((item) => {\r\n      return `<li class=\"gallery__item\">\r\n  <a class=\"gallery__link\" href=\"${item.original}\">\r\n    <img\r\n      class=\"gallery__image\"\r\n      src= \"${item.preview}\"\r\n      data-source= \"${item.original}\"\r\n      alt=\"${item.description}\"\r\n    />\r\n  </a>\r\n</li>`;\r\n    })\r\n    .join(\"\");\r\n}\r\n\r\nconst lightbox = new SimpleLightbox(\".gallery a\", {\r\n  captionsData: \"alt\",\r\n  captionPosition: \"top\",\r\n  captionDelay: 500,\r\n  spinner: true,\r\n});\r\n\r\nconsole.log(lightbox);\r\n"]}